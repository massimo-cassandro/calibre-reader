{"version":3,"file":"calibre-reader-min.js","sources":["../src/js/params.js","../src/js/print-icon.js","../node_modules/@massimo-cassandro/js-utilities/src/print-icon.js","../src/js/build-row.js","../src/js/append-rows.js","../src/calibre-reader.js","../src/js/load-list.js"],"sourcesContent":["export const params = {\n  result_wrapper    : document.querySelector('.result-wrapper'),\n  search_form       : document.querySelector('.search-form'), // fieldset\n  observer_element  : null,\n  spinner_wrapper   : document.querySelector('.spinner-wrapper'),\n\n  orderByBtnsFset   : document.querySelector('.search-options.orderBy'),\n  filterBtnsFset    : document.querySelector('.search-options.filter'),\n  searchFieldsFset  : document.querySelector('.searchFields')\n};\n\n","import { print_icon as pi } from '@massimo-cassandro/js-utilities';\nimport {version} from '../../package.json' assert { type: 'json' };\n\nexport function print_icon(opts) {\n\n  return pi({...opts, ...{icon_file: './icons.svg?v=' + version}});\n}\n","/*\n  import {print_icon} from '@massimo-cassandro/js-utilities';\n\n  // uso base\n  print_icon({\n    id          : 'icona_id',\n    svg_class   : 'icona',\n    icon_file   : app_data.icons\n  })\n\n*/\nexport function print_icon(params) {\n\n  const default_params = {\n    id          : '', // o array di id\n    svg_class   : 'icona',\n    icon_file   : '/imgs/icone.svg', // app_data.icons\n    title       : '',\n    descr       : '',\n    aria_hidden : false, // forzata su false se descr o title sono definiti\n  };\n\n  params = {...default_params, ...params};\n\n  if(!Array.isArray(params.id)) {\n    params.id = [params.id];\n  }\n\n  // se c'è una sola icona di tipo line o fill, la classe `line-icon` o `fill-icon`\n  // viene aggiunta direttamente all'elemento svg\n  if(params.id.length === 1) {\n\n    if(/-line$/.test(params.id)) {\n      params.svg_class = `${params.svg_class} line-icon`.trim();\n\n    } else if (/-fill$/.test(params.id)) {\n      params.svg_class = `${params.svg_class} fill-icon`.trim();\n    }\n  }\n  let base_id = params.id.join('') + Number(Math.round(Math.random() * Date.now())).toString(36),\n    aria_ids = [],\n    descr_unique_id = null,\n    descr = '';\n\n  if (params.descr) {\n    params.aria_hidden = false;\n    descr_unique_id = 'd-' + base_id;\n    aria_ids.push(descr_unique_id);\n\n    descr = `<desc id=\"${descr_unique_id}\">${params.descr}</desc>`;\n  }\n\n  let title_unique_id = null,\n    title = '';\n  if(params.title) {\n    params.aria_hidden = false;\n    title_unique_id = 't-' + base_id;\n    aria_ids.push(title_unique_id);\n\n    title = `<title id=\"${title_unique_id}\">${params.title}</title>`;\n  }\n\n  let svg_attrs = ['role=\"img\"'];\n  if(params.svg_class) {\n    svg_attrs.push(`class=\"${params.svg_class}\"`);\n  }\n  if(params.aria_hidden) {\n    svg_attrs.push('aria-hidden=\"true\"');\n  }\n  if(aria_ids.length) {\n    svg_attrs.push(`aria-labelledby=\"${aria_ids.join(' ')}\"`);\n  }\n\n  return `<svg ${svg_attrs.join(' ')}>\n    ${title}${descr}\n    ${params.id.map(id => {\n      let use_class = '';\n\n      // se si tratta di un'icona composta, ad pgni elelemtno use viene aggiunta\n      // una classe corrispondente all'id e, se necessario, una tra `line-icon` e `fill-icon`\n      if(params.id.length > 1) {\n\n        use_class = id;\n\n        if(/-line$/i.test(id)) {\n          use_class += ' line-icon';\n\n        } else if (/-fill$/i.test(id)) {\n          use_class += ' fill-icon';\n        }\n      }\n      use_class = use_class? ` class=\"${use_class}\"` : '';\n\n      return `<use xlink:href=\"${params.icon_file}#${id}\"${use_class}></use>`;\n    }).join('')}</svg>`;\n}\n","\n/*\n[\n  \"id\",\n  \"title\",\n  \"title_sort\",\n  \"pubdate\",\n  \"timestamp\",\n  \"author\",\n  \"author_sort\",\n  \"serie\",\n  \"series_index\",\n  \"publisher\",\n  \"tags\",\n  \"comment\",\n  \"rating\",\n  \"amz\",\n  \"lettura\",\n  \"data_lettura\"\n]\n*/\n\nimport { print_icon } from './print-icon';\n\nfunction dateStringToIso(str) {\n  const d = new Date(str);\n  return  d.getFullYear() + '-' +\n    String(d.getMonth() + 1).padStart(2, '0') + '-' +\n    String(d.getDate()).padStart(2, '0');\n}\n\n\nexport function build_row(data) {\n\n  let covers_base_url = './covers';\n  if(window.location.origin === 'http://localhost:8000' ) {\n    covers_base_url = 'http://calibre-reader.mazx.it/covers';\n  }\n\n  data.authors = JSON.parse(data.authors);\n  data.tags = JSON.parse(data.tags);\n\n  /* eslint-disable eqeqeq */\n  return `<article class=\"book\">\n    <div class=\"book-inner\">\n\n      <div class=\"book-cover\">\n        ${+data.has_cover? `<img src=\"${covers_base_url}/${data.id}-minia.avif\" alt=\"Cover\" loading=\"lazy\">` : ''}\n      </div>\n\n      <div class=\"book-data\">\n        <div class=\"author\">\n          ${data.authors.map(a => `<span role=\"button\" data-author-id=\"${a.id}\">${a.name}</span>`).join(', ')}\n        </div>\n        <h2 class=\"title\">${data.title}</h2>\n        ${data.serie? `<div class=\"serie\" role=\"button\" data-serie-id=\"${data.serie_id}\"><span>${data.serie}</span> ${data.series_index}</div>` : ''}\n        <div class=\"publisher\">\n          ${data.prima_ediz?  `<time title=\"Anno prima edizione\">${data.prima_ediz}</time> / ` : ''}\n          ${data.publisher?? '\\u2014'} ${(data.pub_year && data.pub_year != '0101')? ` (<time>${data.pub_year}</time>)` : ''}\n        </div>\n\n        <div class=\"info\">\n          ${(data.tags.length) ?\n            `<span class=\"tags-wrapper\">\n              ${data.tags.length?\n                `${print_icon({id: 'tag', svg_class: 'icon top-adjust dark'})}&nbsp;` +\n                `<span class=\"tags\">${data.tags.map(t => `<span role=\"button\" data-tag-id=\"${t.id}\">${t.name}</span>`).join('/')}</span>`\n              : ''}\n            </span>`\n          : ''}\n\n\n          ${data.timestamp?\n            `<time class=\"text-muted text-nowrap\" datetime=\"${dateStringToIso(data.timestamp)}\">\n              ${print_icon({id: 'calendar-blank', svg_class: 'icon top-adjust dark'})}\n              ${new Date(data.timestamp).toLocaleString('it-IT', { year: '2-digit', month: 'short', day: 'numeric' })}\n            </time>`\n          : ''}\n\n          <span class=\"formats-wrapper\">\n            ${print_icon({id: 'file', svg_class: 'icon top-adjust dark'})}\n            <span class=\"file-formats\">${data.files_format?? '&mdash;'}</span>\n          </span>\n\n        </div>\n\n        <div class=\"info\">\n          ${data.amz? `${print_icon({id: 'amazon-logo-fill', svg_class: 'icon icon-lg top-adjust'})}` : ''}\n\n          ${(data.data_lettura || data.rating)?\n            `<span>\n              ${data.data_lettura? print_icon({id: 'eyeglasses', svg_class: 'icon top-adjust dark'}) : ''}\n              <time class=\"text-muted mx-1\" datetime=${dateStringToIso(data.data_lettura)}>${data.data_lettura? new Date(data.data_lettura).toLocaleString('it-IT', { year: '2-digit', month: 'short', day: 'numeric' }) : ''}</time>\n              <span class=\"rating\">${data.rating? '\\u2605'.repeat(data.rating) : ''}</span>\n            </span>`\n          : ''}\n\n          <span>\n            ${print_icon({id: 'books', svg_class: 'icon top-adjust dark'})}\n            <span class=\"scaffale\">${data.scaffale? `<span role=\"button\" data-scaffale-id=\"${data.scaffale_id}\">${data.scaffale}</span>` : '\\u2014'}</span>\n          </span>\n\n        </div>\n      </div>\n\n      <div class=\"book-utils\">\n        <a href=\"https://www.google.it/search?q=${encodeURIComponent(data.authors.map(a => a.name).join(', '))}\" target=\"_blank\" rel=\"noopener noreferrer\">\n          ${print_icon({id: 'google-logo', svg_class: 'icon bold'})}\n        </a>\n\n        <a href=\"https://www.amazon.it/s?k=${encodeURIComponent(data.authors.map(a => a.name).join(', '))}&i=digital-text\" target=\"_blank\" rel=\"noopener noreferrer\">\n          ${print_icon({id: 'amazon-logo', svg_class: 'icon bold'})}\n        </a>\n      </div>\n\n    </div>\n\n    <div class=\"details-trigger\">\n      <button type=\"button\"${(!data.comment && !data.has_cover)? ' disabled' : ''}>\n        ${print_icon({id: (data.comment || (!data.comment && !data.has_cover))? 'chat-centered-dots' : 'image', svg_class: 'icon'})}\n      </button>\n    </div>\n    ${(data.comment || data.has_cover)? `<section class=\"details\">\n      <div>\n      ${data.comment?? ''}\n      ${+data.has_cover? `<div class=\"cover\"><img src=\"${covers_base_url}/${data.id}.avif\" alt=\"Cover\" loading=\"lazy\"></div>` : ''}\n      </div>\n    </section>` : ''}\n  </article>`;\n  /* eslint-enable eqeqeq */\n}\n","import { params } from './params';\nimport { build_row } from './build-row';\n// import { print_icon } from './print-icon';\n\n\nlet search_params = {};\n\nconst search_params_defaults = {\n    q: null,\n    orderBy: null,\n    authorId: null,\n    pag: 0,\n    limit: 20,\n    serieId: null\n  },\n\n  observer_markup = '<div id=\"observer\" class=\"p-1\"></div>',\n\n  scrolling_observer = new IntersectionObserver( (entries) => {\n    if( entries[0].isIntersecting) {\n      search_params.pag++;\n      append_rows(search_params);\n    }\n  },{\n    threshold: 0,\n    rootMargin: '40px 0px' // NB: valori bassi (20px) possono influire con browser mobili con barra indirizzi a scomparsa\n  });\n\n\nexport async function append_rows(user_params = {}) {\n\n  search_params = {...search_params_defaults, ...user_params};\n\n  // console.log(search_params);\n\n  async function get_data() {\n\n    if(search_params.pag === 0) {\n      window.scrollTo(0, 0);\n      params.result_wrapper.innerHTML = '';\n      params.observer_element?.remove();\n      params.observer_element = null;\n    }\n\n    const url = new URL('./get-data.php', location.href),\n      urlParams = url.searchParams;\n\n    for(const i in search_params) {\n      if(search_params[i]) {\n        urlParams.set(i, search_params[i]);\n      }\n    }\n\n\n    // console.log(url.toString());\n\n    const response = await fetch(url.toString()),\n      data = await response.json();\n    return data;\n\n  }\n\n  params.search_form.disabled = true;\n  params.spinner_wrapper.classList.remove('off');\n\n  const data = await get_data();\n\n  if(data.length < search_params.limit && params.observer_element) {\n    scrolling_observer.unobserve(params.observer_element);\n    params.observer_element.remove();\n    params.observer_element = null;\n  }\n\n  params.result_wrapper.insertAdjacentHTML('beforeend',\n    data.map(row => build_row(row)).join('')\n  );\n\n\n\n  if(data.length < search_params.limit ) {\n    params.result_wrapper.insertAdjacentHTML('beforeend',\n      '<div class=\"bookend\"><img src=\"/favicon.svg\" alt=\"\"></div>'\n    );\n  }\n\n  if(!params.observer_element && data.length === search_params.limit) {\n    params.result_wrapper.insertAdjacentHTML('afterend', observer_markup);\n    params.observer_element = document.getElementById('observer');\n    scrolling_observer.observe(params.observer_element);\n  }\n\n  params.spinner_wrapper.classList.add('off');\n  params.search_form.disabled = false;\n\n  // console.log('params.observer_element', params.observer_element !== null, 'pag', search_params.pag);\n\n}\n","import { append_rows } from './js/append-rows';\nimport { params } from './js/params';\nimport { loadList } from './js/load-list';\n\n\n// https://github.com/biati-digital/glightbox#readme\n\n// LISTENERS\nlet search_params = {},\n  search_info = null;\n\nconst searchInput = params.search_form.querySelector('.search-input'),\n  search_info_container= params.search_form.querySelector('.search-info'),\n\n  execute_search = async () => {\n    // console.log(search_params);\n\n    search_info_container.innerHTML = search_info?\n      `<em>Ricerca per</em><br>${search_info.type}: <strong>${search_info.value}</strong>`\n      : '';\n\n    const orderBy = document.querySelector('.search-options input:checked')?.value?? null;\n    await append_rows({...search_params, orderBy: orderBy});\n\n    params.spinner_wrapper.classList.add('off');\n    params.search_form.disabled = false;\n    params.orderByBtnsFset.disabled = false;\n    params.searchFieldsFset.disabled = false;\n    Array.from(params.filterBtnsFset.querySelectorAll('input[type=\"radio\"]'), (i) => i.checked = false);\n  };\n\n// btn esegui ricerca\nconst input_search = async isReset => {\n  search_params = isReset? {} : {q: searchInput.value.trim()};\n  search_info = null;\n  if(isReset) {\n    // searchInput.disabled = false;\n    searchInput.focus({ focusVisible: true });\n  }\n  await execute_search();\n};\nparams.search_form.querySelector('.search-btn').addEventListener('click', () => {\n  input_search();\n}, false);\n\n// esegui ricerca: invio su input search\nsearchInput.addEventListener('keydown', e => {\n  if (e.code === 'Enter') {\n    input_search();\n  }\n}, false);\n\n// reset search\nparams.search_form.querySelector('.reset-btn').addEventListener('click', () => {\n  searchInput.value = '';\n  params.result_wrapper.innerHTML = '';\n  params.search_form.querySelector('[type=\"radio\"]:first-of-type').checked = true;\n\n  input_search(true);\n\n}, false);\n\n\n// reset filter\nparams.result_wrapper.addEventListener('click', e => {\n  if(e.target.id === 'reset-filter') {\n    execute_search();\n  }\n}, false);\n\n\n// orderBy\nparams.orderByBtnsFset.addEventListener('click', e => {\n\n  if(e.target.classList.contains('orderBy-btn')) {\n\n    const radio = document.getElementById(e.target.getAttribute('for'));\n    radio.checked = true;\n\n    execute_search();\n  }\n}, false);\n\n// filter\nparams.filterBtnsFset.addEventListener('click', e => {\n\n  if(e.target.classList.contains('filter-btn')) {\n\n    const radio = document.getElementById(e.target.getAttribute('for'));\n    radio.checked = true;\n\n    loadList(radio.value);\n  }\n}, false);\n\n\n// click authors & series\nparams.result_wrapper.addEventListener('click', e => {\n\n  // authors\n  if(e.target.hasAttribute('data-author-id')) {\n\n    document.getElementById('orderBy-year').click();\n\n    search_info = {\n      type: 'autore',\n      value: e.target.innerText\n    };\n    search_params = {\n      authorId: +e.target.dataset.authorId,\n    };\n    searchInput.value = '';\n    execute_search();\n  }\n\n  // series\n  if(e.target.closest('[data-serie-id]')) {\n\n\n    const target = e.target.closest('[data-serie-id]');\n    document.getElementById('orderBy-serie').click();\n\n    search_info = {\n      type: 'serie',\n      value: target.closest('[data-serie-id]').querySelector('span').innerText\n    };\n    search_params = {\n      serieId: +target.dataset.serieId,\n    };\n    searchInput.value = '';\n    execute_search();\n  }\n\n\n  // tags\n  if(e.target.hasAttribute('data-tag-id')) {\n\n    search_info = {\n      type: 'tag',\n      value: e.target.innerText\n    };\n    search_params = {\n      tagId: +e.target.dataset.tagId,\n    };\n    searchInput.value = '';\n    execute_search();\n  }\n\n  // scaffale\n  if(e.target.hasAttribute('data-scaffale-id')) {\n\n    document.getElementById('orderBy-serie').click();\n\n    search_info = {\n      type: 'scaffale',\n      value: e.target.innerText\n    };\n    search_params = {\n      scaffaleId: +e.target.dataset.scaffaleId,\n    };\n    searchInput.value = '';\n    execute_search();\n  }\n\n\n  // https://frontendcoding.com/getting-the-height-of-a-hidden-element/\n  function getHiddenHeight(el) {\n    if(!el?.cloneNode) {\n      return null;\n    }\n\n    // // lazy images\n    // let img_height = 0;\n    // const cover = el.querySelector('.cover img[loading=\"lazy\"]');\n    // if(cover) {\n    //   console.log('cover');\n    //   cover.loading = 'eager';\n    //   cover.fetchPriority = 'high';\n    //   img_height = cover.naturalHeight;\n    //   console.log(1, img_height);\n    // }\n\n    const clone = el.cloneNode(true);\n    Object.assign(clone.style, {\n      overflow: 'visible',\n      height: 'auto',\n      maxHeight: 'none',\n      opacity: '0',\n      visibility: 'hidden',\n      display: 'block',\n    });\n\n    el.after(clone);\n    const height = clone.offsetHeight;\n\n    clone.remove();\n\n    return height;\n  }\n\n  // details\n  if(e.target.closest('.details-trigger')) {\n    const item_container = e.target.closest('.book'),\n      details = item_container.querySelector('.details');\n\n    // if(!details.dataset.height) {\n    //   details.dataset.height = getHiddenHeight(details);\n    //   details.style.setProperty('--details-height', details.dataset.height +'px');\n    // }\n    if(!getComputedStyle(details).getPropertyValue('--details-height')) {\n      details.style.setProperty('--details-height', getHiddenHeight(details) +'px');\n    }\n\n    item_container.classList.toggle('details-on');\n  }\n\n\n}, false);\n\n\n// avvio\nexecute_search();\n","import { params } from './params';\n\n// TODO annulla filtro\n// TODO filtri separati con interfaccia caricata ad hoc?\n// TODO annulla filtro (torna alla lista)\n\nexport function loadList(list) {\n\n  params.search_form.disabled = true;\n  params.spinner_wrapper.classList.remove('off');\n\n  params.observer_element?.remove();\n  params.result_wrapper.innerHTML = '';\n\n  const url = new URL(`./get-list.php?l=${list}`, location.href).toString();\n  (async () => {\n    const response = await fetch(url),\n      data = await response.json();\n    return data;\n  })()\n    .then(data => {\n\n\n      params.result_wrapper.innerHTML = '<p class=\"text-center mt-1\"><button class=\"btn btn-outline\" type=\"button\" id=\"reset-filter\">Annulla</button></p>' +\n\n      '<ul class=\"list\">' +\n        data.map(item => `<li role=\"button\" data-${list}-id=\"${item.id}\">${item.name}</li>`).join('') +\n      '</ul>';\n\n      params.spinner_wrapper.classList.add('off');\n      params.search_form.disabled = false;\n      params.orderByBtnsFset.disabled = true;\n      params.searchFieldsFset.disabled = true;\n\n\n    })\n    .catch(err => {\n      /* eslint-disable no-console */\n      console.error(url);\n      console.error(err);\n      /* eslint-enable no-console */\n\n      alert('Si è verificato un errore (getList)');\n    });\n\n\n\n}\n"],"names":["params","result_wrapper","document","querySelector","search_form","observer_element","spinner_wrapper","orderByBtnsFset","filterBtnsFset","searchFieldsFset","print_icon","opts","id","svg_class","icon_file","title","descr","aria_hidden","Array","isArray","length","test","trim","base_id","join","Number","Math","round","random","Date","now","toString","aria_ids","descr_unique_id","push","title_unique_id","svg_attrs","map","use_class","pi","version","dateStringToIso","str","d","getFullYear","String","getMonth","padStart","getDate","search_params","search_params_defaults","q","orderBy","authorId","pag","limit","serieId","scrolling_observer","IntersectionObserver","entries","isIntersecting","append_rows","threshold","rootMargin","async","user_params","disabled","classList","remove","data","window","scrollTo","innerHTML","url","URL","location","href","urlParams","searchParams","i","set","response","fetch","json","get_data","unobserve","insertAdjacentHTML","row","covers_base_url","origin","authors","JSON","parse","tags","has_cover","a","name","serie","serie_id","series_index","prima_ediz","publisher","pub_year","t","timestamp","toLocaleString","year","month","day","files_format","amz","data_lettura","rating","repeat","scaffale","scaffale_id","encodeURIComponent","comment","build_row","getElementById","observe","add","search_info","searchInput","search_info_container","execute_search","type","value","from","querySelectorAll","checked","input_search","isReset","focus","focusVisible","addEventListener","e","code","target","contains","getAttribute","radio","list","then","item","catch","err","console","error","alert","loadList","hasAttribute","click","innerText","dataset","closest","tagId","scaffaleId","item_container","details","getComputedStyle","getPropertyValue","style","setProperty","el","cloneNode","clone","Object","assign","overflow","height","maxHeight","opacity","visibility","display","after","offsetHeight","getHiddenHeight","toggle"],"mappings":"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","x_google_ignoreList":[2]}